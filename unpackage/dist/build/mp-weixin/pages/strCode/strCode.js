(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/strCode/strCode","components/uni-nav-bar/uni-nav-bar"],{"326c":function(t,e,n){"use strict";var o={uniStatusBar:function(){return n.e("components/uni-status-bar/uni-status-bar").then(n.bind(null,"5bd6"))},uniIcon:function(){return n.e("components/uni-icon/uni-icon").then(n.bind(null,"7ee2"))}},i=function(){var t=this,e=t.$createElement;t._self._c},c=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return o}))},"35e5":function(t,e,n){"use strict";n.r(e);var o=n("f55f"),i=n.n(o);for(var c in o)"default"!==c&&function(t){n.d(e,t,(function(){return o[t]}))}(c);e["default"]=i.a},"41df":function(t,e,n){"use strict";var o=n("85fe"),i=n.n(o);i.a},"429f":function(t,e,n){"use strict";var o={uniNavBar:function(){return Promise.resolve().then(n.bind(null,"58e3"))},wxOpenSetting:function(){return n.e("components/wx-open-setting/wx-open-setting").then(n.bind(null,"d5ad"))}},i=function(){var t=this,e=t.$createElement;t._self._c},c=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return o}))},5716:function(t,e,n){"use strict";var o=n("bc35"),i=n.n(o);i.a},"58e3":function(t,e,n){"use strict";n.r(e);var o=n("326c"),i=n("35e5");for(var c in i)"default"!==c&&function(t){n.d(e,t,(function(){return i[t]}))}(c);n("41df");var r,u=n("f0c5"),a=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=a.exports},"6cdf":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=u(n("4795")),i=(n("ae66"),n("19b8")),c=n("25f9"),r=n("07d3");u(n("58e3"));function u(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n,o,i,c,r){try{var u=t[c](r),a=u.value}catch(s){return void n(s)}u.done?e(a):Promise.resolve(a).then(o,i)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var c=t.apply(e,n);function r(t){a(c,o,i,r,u,"next",t)}function u(t){a(c,o,i,r,u,"throw",t)}r(void 0)}))}}var l=function(){n.e("components/wx-open-setting/wx-open-setting").then(function(){return resolve(n("d5ad"))}.bind(null,n)).catch(n.oe)},f={components:{wxOpenSetting:l},data:function(){return{openid:"",sec:"",callGetPhone:"400-007-2959",reg1:/[0-9a-zA-Z]{12}/,reg2:/^1[0-9]{10}/,reg3:/[0-9]{4}/,userInfo:{avatarUrl:"",nickName:""},serialcode:"",verifycode:"",phone:"",wxOpenSettingIsShow:!1,wxOpenSettingIsStartAnimation:!1,isNeedPhone:"",customDialogArr:[{bizcode:"-1",title:"系统升级中",content:"酒香不怕巷子深，稍后再试吧!"},{bizcode:"1",title:"序列码错误，请重新输入",content:"请仔细核对~"},{bizcode:"2",title:"这个串码已被扫",content:"扫码时间: jo.reply.earnTime 再扫一瓶试试看~~"},{bizcode:"3",title:"这个串码已过期",content:"这么好的啤酒要学会珍惜~"},{bizcode:"4",title:"活动未开始",content:"亲再等等哦~",batch:"jo.reply.batchName 服务热线：15321413736"},{bizcode:"5",title:"活动已截止",content:"下次早点来哦~"},{bizcode:"6",title:"系统升级中",content:"这么好的啤酒要学会珍惜~"},{bizcode:"8",title:"提示",content:"请输入验证码!"},{bizcode:"9",title:"提示",content:"您输入的验证码不正确，请重新输入!"},{bizcode:"10",title:"错误次数过多",content:"明天再来试试吧!"},{bizcode:"17",title:"好酒美味 更需趁早",content:"您扫的这瓶酒 \n 所属产品批次活动已结束"}]}},onLoad:function(){var e=this;return s(o.default.mark((function n(){var r,u;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.computedGetOpenid;case 2:if(e.openid=n.sent,console.log("await this.computedGetOpenid"),console.log(e.openid),e.checkUserLocation(),r=t.getStorageSync("userData"),u=r.uinfo.openid,!u){n.next=12;break}(0,i.getFailCount)().then((function(t){console.log(t),e.isNeedPhone=t})),n.next=16;break;case 12:return n.next=14,(0,c.getUserDataFun)();case 14:n.sent,(0,i.getFailCount)().then((function(t){console.log(t),e.isNeedPhone=t}));case 16:case"end":return n.stop()}}),n)})))()},onHide:function(){this.wxOpenSettingIsShow=!1},computed:{safeAreaTop:function(){var e=t.getStorageSync("userSystemInfo"),n=e.safeArea.top;return n},computedGetOpenid:function(){var t=this;return s(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t,e.next=3,(0,c.getUserDataFun)();case 3:return n=e.sent,e.abrupt("return",n.openid||"");case 5:case"end":return e.stop()}}),e)})))()}},methods:{getyzm:function(){var e=this;if(e.sec>0)return!1;console.log(e.phone),e.reg2.test(e.phone)?(0,i.getCaptcha)(e.phone).then((function(n){0==n.result.businessCode?(e.sec=60,e.timer()):t.showModal({title:"提示",content:"验证码获取失败！请稍后再试并确认手机号是否输入正确"})})).catch((function(t){})):t.showModal({title:"提示",content:"请填写正确的手机号！~",showCancel:!1})},timer:function(){var t=this;if(this.stop||this.sec<=0)return this.sec=0,!1;this.sec-=1,setTimeout((function(){t.timer()}),1e3)},callGetPhoneFun:function(){(0,r.callPhone)(this.callGetPhone)},WxOpenSettingColse:function(t){var e=this;e.wxOpenSettingIsShow=!1},wosOpenSetting:function(){t.openSetting({complete:function(t){}})},checkUserLocation:function(){var e=this;return s(o.default.mark((function n(){var i,c;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e,n.next=3,(0,r.getSettingLocation)();case 3:c=n.sent,console.log("LocationStatus"),console.log(c),t.getStorage({key:"userLocation",success:function(t){t.data},fail:function(t){0==c?i.wxOpenSettingIsShow=!0:(0,r.getLocation)().then((function(){}))}});case 7:case"end":return n.stop()}}),n)})))()},getSerialCode:function(e,n,o,r){var u=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"00",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"00",l={openid:e,serialcode:n,verifycode:r,phone:o,longitude:a,latitude:s,nickname:"",headimgurl:""};(0,i.serialCode)(l).then((function(t){return console.log("judgeBusinessStrCode"),console.log(t),(0,c.judgeBusinessStrCode)(t)})).then((function(e){console.log("res 调用扫码接口"),console.log(e),console.log(e),t.navigateTo({url:e})}),(function(e){console.log("switchTaberr"),console.log(e);var n=e.toString(),o=(0,c.filterArr)("bizcode",n,u.customDialogArr)[0];console.log("filterArr____________"),console.log(o),t.showModal({title:o.title,content:o.content})}))},submitForm:function(){var e=t.getStorageSync("userLocation")||{},n=e.longitude||"00",o=e.latitude||"00",i=this.openid,c=this.serialcode,r=this.phone,u=this.verifycode;console.log(r.trim()),console.log(u.trim()),this.reg1.test(c.trim())?this.getSerialCode(i,c,"","",n,o):t.showModal({title:"提 示",content:"请输入正确的序列码哦！~"})},back:function(){t.navigateBack(1)}}};e.default=f}).call(this,n("543d")["default"])},"85fe":function(t,e,n){},"9d24":function(t,e,n){"use strict";n.r(e);var o=n("6cdf"),i=n.n(o);for(var c in o)"default"!==c&&function(t){n.d(e,t,(function(){return o[t]}))}(c);e["default"]=i.a},a131:function(t,e,n){"use strict";(function(t){n("8d82");o(n("66fd"));var e=o(n("e110"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},bc35:function(t,e,n){},e110:function(t,e,n){"use strict";n.r(e);var o=n("429f"),i=n("9d24");for(var c in i)"default"!==c&&function(t){n.d(e,t,(function(){return i[t]}))}(c);n("5716");var r,u=n("f0c5"),a=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,"312da22e",null,!1,o["a"],r);e["default"]=a.exports},f55f:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){n.e("components/uni-status-bar/uni-status-bar").then(function(){return resolve(n("5bd6"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("components/uni-icon/uni-icon").then(function(){return resolve(n("7ee2"))}.bind(null,n)).catch(n.oe)},c={name:"uni-nav-bar",components:{uniStatusBar:o,uniIcon:i},props:{title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:"#fff"},backgroundColor:{type:String,default:""},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[String,Boolean],default:!0},border:{type:[String,Boolean],default:!0}},methods:{onClickLeft:function(){this.$emit("click-left")},onClickRight:function(){this.$emit("click-right")}}};e.default=c}},[["a131","common/runtime","common/vendor"]]]);